<main>

  <a (click)="addNewPolygon()"
    class="btn btn-primary text-white d-flex align-self-center align-items-center justify-content-center w-100"
     role="button" mdbRipple>
    <i class="bi bi-plus mr-1 align-self-center" style="font-size: 1.5rem; line-height: 1;"></i>
    Agregar nuevo polígono
  </a>

  <div class="accordion" id="accordionExample">
    <div class="py-2 mt-2" *ngFor="let control of formPoligonos.controls; let i = index">
      <div class="d-flex" id="heading{{i}}">
        <h2 class="m-0 p-0 flex-grow-1 d-flex align-items-start mr-2">
          <button class="btn btn-outline-primary px-5 w-100" mdbRipple type="button" (click)="togglePanel(i)">
            Polígono {{i+1}}
            <i class="ml-1" style="font-size: 1rem; line-height: 1;"
              [ngClass]="{'bi bi-caret-right-fill': indexPanelOpen !== i, 'bi bi-caret-down-fill': indexPanelOpen === i}"></i>
          </button>
        </h2>
        <a class="btn btn-outline-custom d-flex align-self-center align-items-center justify-content-center mr-2"
          role="button" mdbRipple (click)="addVertice(i)">
          <i class="bi bi-plus mr-1 align-self-center" style="font-size: 1.5rem; line-height: 1;"></i>
          Agregar vertice
        </a>
        <a class="btn btn-outline-delete" role="button" (click)="deletePolygon(i)" mdbRipple>
          <i class="fa fa-trash-o" aria-hidden="true"></i>
        </a>
      </div>

      <div [ngbCollapse]="indexPanelOpen !== i" class="collapse" id="collapse{{i}}" data-parent="#accordionExample">
        <app-vertice-form *ngFor="let vertice of control.controls; let j = index"
          [fromGroup]="vertice"
          [verticeIndex]="j"
          [panelIndex]="i" (delete)="deleteVertice(i, j)">
        </app-vertice-form>
      </div>
    </div>
  </div>

</main>
